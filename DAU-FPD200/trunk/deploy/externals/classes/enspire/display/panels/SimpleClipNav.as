import enspire.core.Serverimport enspire.ile.AppEvents;import enspire.display.layout.ToggleClipSlider;import enspire.model.State;class enspire.display.panels.SimpleClipNav extends MovieClip{	private var navItems:Array;	public static var MENU_PADDING = 0;	function SimpleClipNav() {		this.navItems = new Array();		Server.connect(this, "update", AppEvents.START_SEG);	}	public function initNav() {		var nY = 0;		var aClips = Server.model.structure.aClips;		// loop through clips		for(var i:Number = 0; i < aClips.length; i++) {			var mcClipTitle = this.attachMovie("Nav_Clip", "mcClipTitleTitle"+i, i);			////trace("NavItem Added");			mcClipTitle._y = nY;			nY += MENU_PADDING;			nY += mcClipTitle._height;						mcClipTitle.mcText.tf.htmlText = aClips[i].title;			mcClipTitle.mcText.tf.html = true;			mcClipTitle.mcText.tf.autoSize = true;			mcClipTitle.bSelected = false;			mcClipTitle.mcSelected._visible = false;			mcClipTitle.bCurrent = false;			mcClipTitle.nSegIndex = aClips[i].getStartSegIndex();			mcClipTitle.bVisited = false;			mcClipTitle.mcComplete._visible = false;			mcClipTitle.navNav = this;						mcClipTitle.onRelease = function() {				Server.getController("app").gotoIndex(this.nSegIndex);				this.bSelected = true;				this.mcSelected._visible = true;				this.gotoAndStop("overNoOut");			}			mcClipTitle.onRollOver = function() {				this.gotoAndStop("over")					}			mcClipTitle.onRollOut = mcClipTitle.onReleaseOutside = function() {				this.gotoAndStop("out");			}						mcClipTitle.onPress = function () {				this.gotoAndStop("down");			}			this.navItems.push(mcClipTitle);		}	}	public function update(secId:Number, clipId:Number, segId:Number) {		var secId = State.nSection;		var clipId = State.nClip;		var segId = State.nSegment;		//trace("UPDATE MENU  "+clipId+" LOOPING THROUGH "+navItems.length);		for(var i = 0; i < navItems.length; i++) {			if(i == clipId) {				////trace("SELECT: "+navItems[i]);				navItems[i].bSelected = true;				navItems[i].mcSelected._visible = true;			}else {				////trace("DESELECT: "+navItems[i]);				navItems[i].gotoAndStop("up");				navItems[i].bSelected = false;				navItems[i].mcSelected._visible = false;			}		}	}	public function toString() {		return "enspire.display.panels.CourseNav";	}}